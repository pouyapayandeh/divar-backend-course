(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{220:function(e,r,o){"use strict";o.r(r);var t=o(0),n=Object(t.a)({},(function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"آشنایی-با-docker"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#آشنایی-با-docker"}},[e._v("#")]),e._v(" آشنایی با Docker")]),e._v(" "),o("p",[e._v("فرض کنین می‌خواین یه پروژه که روی کامپیوتر خودتون درست کردین و بالا آوردین رو یک جای دیگه هم ایجاد کنین. درست کردن این محیط می‌تونه کار خیلی سخت و طاقت‌فرسایی باشه! چیزی که اینجا می‌تونه به کمک ما بیاد و خیلی از جاها کار ما رو راه بندازه ابزاری به نام Docker است. اما قبل از اینکه بریم سراغ یادگرفتنش خوبه که قبلش با مفهوم Virtualization و همچنین "),o("a",{attrs:{href:"https://en.wikipedia.org/wiki/Operating-system-level_virtualization",target:"_blank",rel:"noopener noreferrer"}},[e._v("Virtualization در سطح سیستم‌عامل"),o("OutboundLink")],1),e._v(" آشنا بشین. حالا وقتش هست که بریم سراغ اینکه یه آشنایی اولیه‌ای با Docker پیدا کنیم. خوندن "),o("a",{attrs:{href:"https://scotch.io/tutorials/getting-started-with-docker",target:"_blank",rel:"noopener noreferrer"}},[e._v("این لینک"),o("OutboundLink")],1),e._v(" می‌تونه کمک کنه.")]),e._v(" "),o("p",[e._v("حواستون باشه که سایت داکر برای ایران تحریمه و برای دانلود کردن imageهای داکر خوبه که از "),o("a",{attrs:{href:"https://docs.docker.com/engine/admin/systemd/#httphttps-proxy",target:"_blank",rel:"noopener noreferrer"}},[e._v("http proxy"),o("OutboundLink")],1),e._v(" استفاده کنید. (آدرسش رو می‌تونید از منتورتون بپرسید.)")]),e._v(" "),o("p",[e._v("تمرین:")]),e._v(" "),o("ol",[o("li",[e._v("docker imageه nginx رو pull کن و ۳تا nginx رو پورت های ۸۰۸۰، ۸۰۸۱ و ۸۰۸۲ بالا بیار.")]),e._v(" "),o("li",[e._v("nginxای که روی پورت ۸۰۸۲ هست رو پایین بیار و containerای که واسش ساخته شده رو remove کن. "),o("br"),e._v("\n(اگر اول کانتینر رو remove میکردی چی میشد؟)")]),e._v(" "),o("li",[e._v("docker imageه nginx رو remove کن.")]),e._v(" "),o("li",[e._v("همونطور که تا الان احتمالا متوجه شدی متاسفانه داکر برای کشور ما تحریمه و خب باید از یه چیزی مثلا vpn استفاده کنیم. و خب اگه مثلا بخوایم رو سرور production از یه اینجور چیزی استفاده کنیم خیلی سخت میشه. "),o("br"),e._v("\nدر همین راستا میخوایم که یه docker imageو رو کامپیوتر خودمون بگیریم و یه جوری تبدیلش کنیم به یه فایلی که قابل کپی کردن باشه. برای این کار داکر به ما ۲تا روش میده که import/export و save/load هستند. این ۲تا روش رو امتحان کن و فرقاشونو در بیار. به نظرت کدوم روش برای کار ما بهتره؟")]),e._v(" "),o("li",[e._v("برای ساختن docker image باید یه چیزی به نام dockerfile بنویسی و از رو اون image رو بسازی. "),o("br"),e._v("\nیه docker image بساز واسه یه داکری که وقتی اجراش کنی اسمتو ۱۰بار چاپ کنه.")]),e._v(" "),o("li",[e._v("با استفاده از environment variable در داکر یه کاری کن که داکری که در مرحله قبل نوشتی بتونه یه رشته ورودی بگیره و اونو ۱۰بار چاپ کنه.")]),e._v(" "),o("li",[e._v("یک docker image دلخواه که blocking باشه رو اجرا کن و با استفاده از دستور docker exec یه shell ازش بگیر و ببین توش چه‌خبره. (blocking بودن یعنی یه سرویس بالا بیاره و منتظر بمونه مثل داکر nginx)")]),e._v(" "),o("li",[e._v("همونطور که تو قسمت قبل دیدی فایل هایی که تو داکر وجود داره با فایل هایی که تو کامپیوتر خودت هست فرق داره و یه فایل سیستم جدا داره. حالا یه داکر فایل بنویس که تو آدرس /home/salam/ding یه فایل خالی بسازه. همچنین یه کاری کن که وقتی این داکر رو اجرا میکنی تو Desktopه خودت هم اون فایل‌ه ساخته شه. همچنین داکرت رو یه جوری کن که blocking باشه و با عوض کردن فایل توی داکر فایل توی Desktopت هم عوض شه. (از مفهوم "),o("a",{attrs:{href:"https://docs.docker.com/engine/admin/volumes/bind-mounts/",target:"_blank",rel:"noopener noreferrer"}},[e._v("binding"),o("OutboundLink")],1),e._v(" توی داکر استفاده کنید)")]),e._v(" "),o("li",[e._v("همونطور که میدونین docker هایی که بالا میارین isolated هستن و مثلا روی نتورک هم دیگه رو نمیتونن ببینن، برای این کار میتونین همه container هاتون رو با گزینه net=host-- اجرا کنین. که این کار عموما خوب نیست. چرا؟ "),o("br"),e._v("\nیه راه معمولا بهتر برای انجام این کار استفاده از docker-compose عه.(از "),o("a",{attrs:{href:"https://docs.docker.com/compose/overview/",target:"_blank",rel:"noopener noreferrer"}},[e._v("اینجا"),o("OutboundLink")],1),e._v(" بخونید) "),o("br"),e._v("\nحالا یه compose file بنویسید که دیتابیس "),o("a",{attrs:{href:"https://docs.mongodb.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("mongodb"),o("OutboundLink")],1),e._v(" رو در حالت "),o("a",{attrs:{href:"https://docs.mongodb.com/v3.4/core/master-slave/",target:"_blank",rel:"noopener noreferrer"}},[e._v("master-slave"),o("OutboundLink")],1),e._v(" بالا بیاره و بشه تعداد رپلیکاهاشو تغییر داد.")])])])}),[],!1,null,null,null);r.default=n.exports}}]);
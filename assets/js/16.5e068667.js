(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{210:function(t,r,a){"use strict";a.r(r);var e=a(0),n=Object(e.a)({},(function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"پروژه-drf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#پروژه-drf"}},[t._v("#")]),t._v(" پروژه DRF")]),t._v(" "),a("h3",{attrs:{id:"اهداف"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#اهداف"}},[t._v("#")]),t._v(" اهداف")]),t._v(" "),a("ul",[a("li",[t._v("آشنایی با DRF")]),t._v(" "),a("li",[t._v("آشنایی با Authorization و authentication")]),t._v(" "),a("li",[t._v("آشنایی با JWT")]),t._v(" "),a("li",[t._v("آشنایی با مفهوم Cache")]),t._v(" "),a("li",[t._v("استفاده از Cache داخل فریم ورک Django")]),t._v(" "),a("li",[t._v("آشنایی با لاگ")])]),t._v(" "),a("h3",{attrs:{id:"توضیح"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#توضیح"}},[t._v("#")]),t._v(" توضیح")]),t._v(" "),a("p",[t._v("برای اینکه خودمون بتونیم وب سرویس ها Rest رو با پایتون پیاده سازی کنیم خوبه که از یه فریم ورک استفاده کنیم.")]),t._v(" "),a("p",[t._v("یکی از فریم ورک های خیلی خوب فریم ورک "),a("a",{attrs:{href:"https://www.django-rest-framework.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("DRF"),a("OutboundLink")],1),t._v(" هستش که با استفاده از "),a("a",{attrs:{href:"https://www.djangoproject.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("جنگو"),a("OutboundLink")],1),t._v(" یک فریم ورک سطح بالا برای نوشتن برنامه های تحت وب هستش، کار می کنه. برای آشنایی و شروع به کار پیشنهاد می کنم که این "),a("a",{attrs:{href:"https://www.django-rest-framework.org/tutorial/quickstart/",target:"_blank",rel:"noopener noreferrer"}},[t._v("لینک"),a("OutboundLink")],1),t._v(" رو بخونی.")]),t._v(" "),a("p",[t._v("برای این تمرین میخوایم بک اند یه سایت مثل توییتر رو بسازیم.")]),t._v(" "),a("p",[t._v("همونطور که میدونی تو توییتر یک سری کاربر داریم که این کاربر ها با یه ایدی مثل @Mentee مشخص می شن.")]),t._v(" "),a("p",[t._v("برای اولین کار یه اندپوینت تعریف بکن که از طریق اون بتونیم کاربر بسازیم کاربر هامون فقط ایدی و یه اسم دارن. تو جواب این وب سرویس یه توکن باید برگردونی که کاربر بقیه کارهاش که نیاز به احراز هویت داره  رو با این توکن باید انجام بده و این توکن رو تو هدر می فرستیم.")]),t._v(" "),a("p",[t._v("تو اندپوینتی که ساختی باید با متد های PUT و یا PATCH باید بتونیم اسم کاربر رو تغییر بدیم.")]),t._v(" "),a("p",[t._v("همه مدل هایی که میخوایم بسازیم(از جمله خود کاربر) باید تاریخ ساخته شدن و تاریخ آخرین تغییر رو هم داشته باشن.")]),t._v(" "),a("p",[t._v("در مرحله بعد هر کاربر باید بتونه پست بزاره. هر پست فقط یک متن داره.")]),t._v(" "),a("p",[t._v("پس یه اندپوینت بساز که کاربرها بتونن از طریق اون پست بسازن، پست ها قابلیت حذف و یا تغییر رو هم دارن.برای هر پست هم باید یک آیدی به صورت یکتا هم ساخته بشه که با این آیدی بشه تغییرش داد و حذفش کرد.")]),t._v(" "),a("p",[t._v("بعد از اون میخوایم که کاربرها بتونن روی پست های خودشون و یا بقیه کامنت بزارن. کامنت هم فقط یک متنه")]),t._v(" "),a("p",[t._v("یه اندپوینت بساز که با گرفتن ایدی پست و متن کامنت، رو اون کامنت بزاره.")]),t._v(" "),a("p",[t._v("یه سری وب سرویس هم میخوایم که کار های زیر رو بکنه:")]),t._v(" "),a("ul",[a("li",[t._v("لیست پست های یک آدم رو برگردونه")]),t._v(" "),a("li",[t._v("لیست کامنت های رو یک پست رو برگردونه")]),t._v(" "),a("li",[t._v("لیست تمام پست از همه کاربر ها با کامنت هاشون بر اساس زمان آخرین تغییر رو برگردونه")])]),t._v(" "),a("p",[t._v("برای سرویس هایی که یک لیست برمیگردونن باید حواسمون باشه که اگر حجم داده خیلی زیاد باشه ممکنه مشکل ساز باشه برای همین برای این وب سرویس ها خوبه که از صفحه بندی استفاده کنیم. بعد از مطالعه این "),a("a",{attrs:{href:"https://www.django-rest-framework.org/api-guide/pagination/",target:"_blank",rel:"noopener noreferrer"}},[t._v("لینک"),a("OutboundLink")],1),t._v(" به وب سرویس هایی که لیست بر می گردونن صفحه بندی رو اضافه کن.")]),t._v(" "),a("p",[t._v("حالا میخوایم این امکان رو به کاربر بدهیم که برای اینکه برنامه های شخص ثالث بتونن اطلاعاتش رو بخونن به اون ها دسترسی های محدود بده. برای این کار از "),a("a",{attrs:{href:"https://jwt.io/introduction/",target:"_blank",rel:"noopener noreferrer"}},[t._v("jwt"),a("OutboundLink")],1),t._v(" می خواهیم استفاده کنیم.")]),t._v(" "),a("p",[t._v("یک اندپوینت بساز که کاربر بتونه با اون یه توکن جدید ولی با محدودیت های مختلف بسازه.به این صورت که کاربر یک لیست به صورت زیر پست می کنه:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"create_post"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"delete_post"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("و به عنوان جواب یه توکن jwt می گیره.")]),t._v(" "),a("p",[t._v("این محدودیت ها این هستند که دارنده این توکن اجازه داره که کدوم وب سرویس ها رو استفاده کنه. این دسترسی ها رو باید تو توکن jwt بزاری و فقط برای کاربر سازنده توکن قابل استفاده هستن.از این زمان به بعد موقع احراز هویت کاربر ها اگر توکنشون jwt بود باید محدودیت ها رو وب سرویس ها اعمال کنیم و در صورت نداشتن دسترسی خطای مناسب تولید کنیم.")]),t._v(" "),a("h2",{attrs:{id:"آشنایی-با-caching"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#آشنایی-با-caching"}},[t._v("#")]),t._v(" آشنایی با Caching")]),t._v(" "),a("p",[t._v("موقعی که بحث کاربرهای با تعداد زیاد به وسط میاد، کارایی برنامه‌مون برای راضی نگه داشتن کاربرا از مدت زمانی که طول میکشه به جواب درخواست‌شون برسن موضوع خیلی مهمی میشه. بعضی وقتا مرورگر کاربر اگه لوگوی سایت ما رو تا مدتی پیش خودش نگه داره و هر دفعه تلاش نکنه از سرور ما بگیره، زمان load صفحه کاهش پیدا می‌کنه، بعضی وقت‌ها هم وقتی سمت سرور، بعد از کلی محاسبات، یک صفحه‌ی خروجی درست کردیم و به یه درخواست کاربر جواب دادیم و قراره همین صفحه رو به ۱۰۰۰ نفر دیگه هم بدیم، با نگه‌ داشتن موقتی این صفحه می‌تونیم کلی زمانی که کاربر به خواسته‌ی خودش میرسه رو کاهش بدیم.")]),t._v(" "),a("h3",{attrs:{id:"برای-مطالعه"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#برای-مطالعه"}},[t._v("#")]),t._v(" برای مطالعه")]),t._v(" "),a("ul",[a("li",[t._v("حتما "),a("a",{attrs:{href:"https://www.digitalocean.com/community/tutorials/web-caching-basics-terminology-http-headers-and-caching-strategies",target:"_blank",rel:"noopener noreferrer"}},[t._v("این لینک"),a("OutboundLink")],1),t._v(" رو مطالعه کنی تا بیشتر با مفهوم Cache آشنا بشی")]),t._v(" "),a("li",[t._v("برای استفاده از cache توی django "),a("a",{attrs:{href:"https://docs.djangoproject.com/en/3.0/topics/cache/",target:"_blank",rel:"noopener noreferrer"}},[t._v("این لینک"),a("OutboundLink")],1),t._v(" رو بخون.")])]),t._v(" "),a("h3",{attrs:{id:"تمرین"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#تمرین"}},[t._v("#")]),t._v(" تمرین")]),t._v(" "),a("ul",[a("li",[t._v("برای API گرفتن پست ها کش اضافه کن که اگه تا ۵ دقیقه کاربر دیگه‌ای هم خواست اون جواب اون API رو ببینه دوباره سمت سرور json ساخته نشه و از همون قبلی استفاده کنه. می‌خوایم که json ها توی ردیس ذخیره بشن.")]),t._v(" "),a("li",[t._v("ابزار Apache Benchmark رو نصب کن و با استفاده ازش اندازه بگیر اون کارایی اون API قبل و بعد cache چقدر تغییر کرده")])]),t._v(" "),a("h2",{attrs:{id:"لاگینگ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#لاگینگ"}},[t._v("#")]),t._v(" لاگینگ")]),t._v(" "),a("p",[t._v("اغلب نیاز داریم بدونیم داره چه اتفاقاتی _زمان اجرا_ی کد می‌افته. از اینکه چه خطایی کجا رخ داده گرفته تا اینکه بخوایم متوجه بشیم")]),t._v(" "),a("ul",[a("li",[a("em",[t._v("چه تابعی")])]),t._v(" "),a("li",[t._v("چه زمانی")]),t._v(" "),a("li",[t._v("روی چه داده‌هایی")]),t._v(" "),a("li",[t._v("در چه شرایط محیطی")]),t._v(" "),a("li",[t._v("با چه نتیجه‌ای (مقادیر خروجی؟ خطا؟…)")])]),t._v(" "),a("p",[t._v("اجرا شده و stack trace رو ببینیم.  برای همین، نیاز به یه ابزاری هست که گزارشی از چیزهایی که برامون مهم هست رو یه جا ثبت و نگهداری کنیم. این کار هم برای تست کردن و دیباگ کردن کد مهمه و  هم برای "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Software_audit_review",target:"_blank",rel:"noopener noreferrer"}},[t._v("Auditing"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("برای مطالعه بیشتر "),a("a",{attrs:{href:"https://www.freecodecamp.org/news/you-should-have-better-logging-now-fbab2f667fac/",target:"_blank",rel:"noopener noreferrer"}},[t._v("این‌جا"),a("OutboundLink")],1),t._v(" و "),a("a",{attrs:{href:"https://dev.to/raysaltrelli/logging-best-practices-obo",target:"_blank",rel:"noopener noreferrer"}},[t._v("این‌جا"),a("OutboundLink")],1),t._v(" رو بخون")]),t._v(" "),a("h3",{attrs:{id:"تمرین-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#تمرین-2"}},[t._v("#")]),t._v(" تمرین")]),t._v(" "),a("p",[t._v("روی پروژه تنظیمات Logging پروژه رو جوری تنظیم کن که لاگ‌ها رو توی یک فایل در جای مناسب بریزه. (راهنمایی: برای انتخاب جاش می‌تونی از چیزهایی که در مورد فولدرهای مختلف لینوکس یاد گرفتی کمک بگیری)")]),t._v(" "),a("p",[a("br"),t._v("\nبعد از این که تست کردی و مطمئن شدی که تنظیمات رو درست تعیین کردی، گام بعدی اینه که در قسمت‌های مختلف پروژه که حس می‌کنی نیازه لاگ بذاری.")])])}),[],!1,null,null,null);r.default=n.exports}}]);